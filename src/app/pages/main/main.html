<div layout="column" layout-fill>
    <md-toolbar class="toolbar" ng-if="!screenIsSmall" md-scroll-shrink md-shrink-speed-factor="0.1" layout="row" layout-align="start center">
        <p class="logo" ui-sref="home.creativity"> Campusbox</p>
        <form flex="30" ng-submit="searchedFast(searchText)">
            <input class="search" type="text" name="searchText" placeholder="Search Campusbox">
        </form>

        <section layout-align="end start">
            <!-- <md-button ng-repeat="item in vm.menuItems" layout-align="center center" ng-class="{active: (currentMenu==item.name)}" flex class="capitalize grey_text" ng-click="vm.selectItem(item)" ui-sref="{{item.sref}}">
                <div class="md-tile-content" layout="column">
                    <md-icon md-svg-icon="{{item.icon}}"></md-icon>
                </div>
                <div class="md-tile-content">
                    {{item.name}}
                </div>
            </md-button> -->
            <md-button ng-if="!authenticated" ng-click="openLoginDialog()" md-menu-origin="" md-menu-align-target layout-align="center center" flex class="capitalize grey_text" aria-label="Notifications">
                <div class="md-tile-content" layout="column">
                    <md-icon md-svg-icon="plus-circle"></md-icon>
                </div>
                <div class="md-tile-content">
                    Add
                </div>
            </md-button>
            <md-menu md-offset="-88 56">
                <md-button ng-class="{active: (currentMenu=='add')}" ng-show="authenticated" md-menu-origin="" md-menu-align-target layout-align="center center" flex class="capitalize grey_text" aria-label="Notifications" ng-click="$mdMenu.open()">
                    <div class="md-tile-content" layout="column">
                        <md-icon class="cb-grey-fill" md-svg-icon="plus-circle"></md-icon>
                    </div>
                    <div class="md-tile-content">
                        Add
                    </div>
                </md-button>
                <md-menu-content width="5">
                    <!-- <md-menu-item>
                        <md-button ng-click="$mdCloseMenu()" ui-sref="home.addEvent">
                            <div layout="row" flex="" class="ng-scope layout-row flex">
                                <p flex="" class="flex">Add Opportunity</p>
                                <md-icon md-svg-icon="calendar"></md-icon>
                            </div>
                        </md-button>
                    </md-menu-item> -->
                    <md-menu-item>
                        <md-button ng-click="$mdCloseMenu()" ui-sref="home.addCreativity">
                            <div layout="row" flex="" class="ng-scope layout-row flex">
                                <p flex="" class="flex">Add Creativity</p>
                                <md-icon md-svg-icon="all-inclusive"></md-icon>
                            </div>
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>
        </section>
        <section layout-align="end start">
            <md-button ng-class="{active: (currentMenu=='home.myProfile')}" ng-show="authenticated" layout-align="center center" flex class="capitalize grey_text" aria-label="Notifications" ng-click="vm.toggleRightSidebar()">
                <div class="md-tile-content" layout="column">
                    <img ng-src="{{user.image}}" style="height: 24px; width: 24px; margin: auto; border-radius: 100px;">
                </div>
                <div class="md-tile-content">
                    Me
                </div>
            </md-button>
            <md-button ng-show="!authenticated" layout-align="center center" ng-class="{active: $state.includes('home')}" flex class="capitalize grey_text" ng-click="openLoginDialog()">
                <div class="md-tile-content" layout="column">
                    <md-icon md-svg-icon="account"></md-icon>
                </div>
                <div class="md-tile-content">
                    Login
                </div>
            </md-button>
        </section>
    </md-toolbar>
    <md-toolbar hide-gt-sm layout="row" ng-hide="currentState == 'home.addCreativity' || hideBottomBar" style="position: fixed;bottom: 0px; box-shadow: 0px 1px 8px 2px rgba(0, 0, 0, 0.2), 0px 3px 4px 2px rgba(0, 0, 0, 0.14), 0px 3px 3px 2px rgba(0, 0, 0, 0.12)"
        layout-align="center center">
        <md-button ng-class="{active: (currentMenu=='home.dashboard')}" layout-align="center center" flex class="capitalize grey_text bottom-menu-item" ng-click="vm.selectItem(item)" ui-sref-active="" ui-sref=".dashboard">

            <div hide-md class="md-tile-content">
                <md-icon md-svg-icon="home"></md-icon>
            </div>
            <div class="md-tile-content">
                Home
            </div>
        </md-button>
        <md-button layout-align="center center" ng-class="{active: (currentMenu=='home.searchAll')}" flex class="capitalize grey_text bottom-menu-item" ui-sref="home.searchAll" aria-label="Notifications" ng-click="">
            <div hide-md class="md-tile-content">
                <md-icon md-svg-icon="magnify"></md-icon>
            </div>
            <div class="md-tile-content">
                Search
            </div>
        </md-button>
        <md-button ng-class="{active: (currentMenu=='home.events')}" layout-align="center center" flex class="capitalize grey_text bottom-menu-item" ng-click="vm.selectItem(item)" ui-sref-active="" ui-sref=".events">
            <div hide-md class="md-tile-content">
                <md-icon md-svg-icon="calendar"></md-icon>
            </div>
            <div class="md-tile-content">
                Opportunities
            </div>
        </md-button>
        <md-button ng-class="{active: (currentMenu=='home.creativity')}" layout-align="center center" flex class="capitalize grey_text bottom-menu-item" ng-click="vm.selectItem(item)" ui-sref-active="" ui-sref=".creativity">
            <div hide-md class="md-tile-content">
                <md-icon md-svg-icon="all-inclusive"></md-icon>
            </div>
            <div class="md-tile-content">
                Creativity
            </div>
        </md-button>
        <md-button ng-class="{active: ((currentMenu=='home.addCreativity') || (currentMenu=='home.addEvent') || (currentMenu=='home.myProfile'))}" ng-show="authenticated" layout-align="center center" flex class="capitalize grey_text bottom-menu-item" aria-label="Notifications"
            ng-click="vm.toggleRightSidebar()">
            <!--Style tag below was intentionally done by Ayush till he gets to this point-->
            <div class="md-tile-content" style="height: 24px; width: 24px; margin: auto; border-radius: 100px;">
                <img ng-src="{{user.image}}" class="md-card-avatar">
                <!-- <md-icon md-svg-icon="account"></md-icon> -->
            </div>
            <div class="md-tile-content">
                Me
            </div>
        </md-button>
        <md-button hide-gt-sm ng-show="!authenticated" layout-align="center center" ng-class="{active: $state.includes('home')}" flex class="capitalize grey_text bottom-menu-item" ng-click="openLoginDialog()">
            <div class="md-tile-content" layout="column">
                <md-icon md-svg-icon="account"></md-icon>
            </div>
            <div class="md-tile-content">
                Login
            </div>
        </md-button>
        </md-menu>
    </md-toolbar>
    <md-content flex style="background-color: {{currentPageBackground}} ">
        <div class="main-container" ui-view>
        </div>
    </md-content>
    <md-sidenav md-component-id="right" class="md-sidenav-right">
        <section>
            <!-- <div ng-include src=" 'app/views/partials/messages.html'"></div> -->
            <div class="messages" layout-fill>
                <div class="messages-content">
                    <md-list>
                        <md-list-item class="md-2-line" ng-click="vm.toggleRightSidebar()" ui-sref="home.myProfile({tab: 'profile'})">
                            <img ng-src="{{user.image}}" class="md-avatar" alt="{{user.name}}" />
                            <div class="md-list-item-text">
                                <h3>{{user.name}}</h3>
                                <p>View profile</p>
                            </div>
                        </md-list-item>
                    </md-list>
                    <md-menu-item>
                        <md-button ng-click="vm.toggleRightSidebar()" ui-sref="home.myProfile({tab:'recomended'})">
                            <div layout="row" flex="" class="ng-scope layout-row flex">
                                <p flex="" class="flex">My Bookmarks</p>
                                <md-icon md-svg-icon="bookmark"></md-icon>
                            </div>
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-click="vm.toggleRightSidebar()" ui-sref="home.myProfile({tab:'creativity'})">
                            <div layout="row" flex="" class="ng-scope layout-row flex">
                                <p flex="" class="flex">My Creativity</p>
                                <md-icon md-svg-icon="all-inclusive"></md-icon>
                            </div>
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-click="vm.toggleRightSidebar()" ui-sref="home.myProfile({tab: 'Opportunity'})">
                            <div layout="row" flex="" class="ng-scope layout-row flex">
                                <p flex="" class="flex">My Opportunities</p>
                                <md-icon md-svg-icon="calendar"></md-icon>
                            </div>
                        </md-button>
                    </md-menu-item>
                    <center>
                        <h3 class="grey_text">Notifications</h3>
                        <md-divider></md-divider>
                    </center>
                    <md-list>
                        <md-list-item class="md-2-line" ng-repeat="notification in notifications" ng-click="NotificationItemClicked(notification)">
                            <md-icon ng-if="notification.type=='follower'" md-svg-icon="account"></md-icon>
                            <md-icon ng-if="notification.type=='event_rsvps'" md-svg-icon="calendar"></md-icon>
                            <md-icon ng-if="notification.type=='content_appreciate'" md-svg-icon="all-inclusive"></md-icon>
                            <div class="md-list-item-text">
                                <p ng-if="notification.type=='follower'" ui-sref="home.profile({username: notification.follower_username})">{{notification.follower_username}} started following you.</p>
                                <p ng-if="notification.type=='event_rsvps'" ui-sref="home.singleEvent({eventId: notification.event_id})">{{notification.total}} {{(notification.total>1)?'people are':'person is'}} interested your opportunity"{{notification.title}}" </p>
                                <p ng-if="notification.type=='content_appreciate'" ui-sref="home.singleContent({contentId: notification.content_id})">{{notification.total}} {{(notification.total>1)?'people have':'person has'}} appreciated your creativity.</p>
                            </div>
                            <md-button class="md-secondary md-icon-button" ng-click="doSecondaryAction($event)" ng-if="phone.options.actionIcon" aria-label="call">
                                <md-icon md-svg-icon="{{phone.options.actionIcon}}"></md-icon>
                            </md-button>
                        </md-list-item>
                        <div ng-if="notifications.length==0">
                            <center>
                                <md-icon md-svg-icon="bell-ring"></md-icon>
                                <p>No new notification.</p>
                            </center>
                        </div>
                        <md-divider></md-divider>
                    </md-list>
                    <div flex></div>
                    <md-menu-item>
                        <md-button ng-click="logout();vm.toggleRightSidebar()">
                            <div layout="row" flex="" class="ng-scope layout-row flex">
                                <p flex="">Sign Out</p>
                                <md-icon md-svg-icon="logout-variant"></md-icon>
                            </div>
                        </md-button>
                    </md-menu-item>
                </div>
            </div>
        </section>
    </md-sidenav>
</div>